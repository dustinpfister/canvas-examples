<html><head><title>canvas example hyper casual to the black</title></head><body>
<div id="canvas-app"style="width:320px;height:240px;margin-left:auto;margin-right:auto;"></div>
<script>var gameMod=(function(){var hardCode={maxDistance:1000000000000,pps:{start:32,cap:2048}};var api={};api.create=function(opt){opt=opt||{};var game={canvas:opt.canvas||{width:320,height:240},pps:opt.pps||hardCode.pps.start,distance:opt.distance===undefined?0:opt.distance,gamePer:0,target:{distance:opt.targetDistance===undefined?hardCode.maxDistance:targetDistance,timeUnit:opt.targetTimeUnit===undefined?'years':opt.targetTimeUnit,ETA:0},playerShip:{x:0,y:0,w:32,h:32}};api.update(game,0);return game;};var secsToX=function(secs,x){x=x===undefined?'days':x;if(x==='minutes'){return secs/60;} if(x==='hours'){return secs/60/60;} if(x==='days'){return secs/60/60/24;} if(x==='years'){return secs/60/60/24/365.25;} return secs;};var timeToDistance=function(game,distance){if(game.distance<distance){var secs=(distance-game.distance)/game.pps;return secs;} return 0;}; api.update=function(game,secs){game.distance=game.distance+game.pps*secs;game.distance=game.distance>hardCode.maxDistance?hardCode.maxDistance:game.distance;game.gamePer=game.distance/hardCode.maxDistance;var secsToTarget=timeToDistance(game,game.target.distance);game.target.ETA=secsToX(secsToTarget,game.target.timeUnit);game.playerShip.x=game.canvas.width/2-16;game.playerShip.y=game.canvas.height-64;};return api;}());var draw=(function(){var setBasicText=function(ctx){ctx.textBaseline='top';ctx.textAlign='left';ctx.font='10px arial';ctx.fillStyle='white';};var backgroundSolid=function(ctx,game,canvas){var c=Math.round(128-game.gamePer*128);ctx.fillStyle='rgba(0,'+c+','+c+',1)';ctx.fillRect(0,0,canvas.width,canvas.height);};var backgroundGrid=function(ctx,game,canvas){ctx.lineWidth=3;ctx.strokeStyle='#5a5a5a';var cellW=Math.floor(canvas.width/32)+2,cellH=Math.floor(canvas.height/32)+2;var x,y,i=0,len=cellW*cellH,dy=game.distance%256/256*32;while(i<len){x=i%cellW;y=Math.floor(i/cellW);ctx.beginPath();ctx.rect(-32+x*32,-32+dy+y*32,32,32);ctx.stroke();i+=1;}};var objectMethods={box:function(ctx,obj,game){ctx.fillStyle='green';ctx.fillRect(obj.x,obj.y,obj.w,obj.h);}};var drawObject=function(ctx,obj,game,method){method=method||'box';objectMethods[method](ctx,obj,game);};return{back:function(ctx,game,canvas){backgroundSolid(ctx,game,canvas);backgroundGrid(ctx,game,canvas);},textETA:function(ctx,game,x,y){var text='Target ETA: '+Number(game.target.ETA).toFixed(2)+' '+game.target.timeUnit;setBasicText(ctx);ctx.fillText(text,x,y);},textDistance:function(ctx,game,x,y){var text='Distance: '+Math.floor(game.distance);setBasicText(ctx);ctx.fillText(text,x,y);},playerShip:function(ctx,game){drawObject(ctx,game.playerShip,game,'box');},ver:function(ctx,state,x,y){var text='v'+state.ver;setBasicText(ctx);ctx.fillText(text,x,y);},}}());var canvas=document.createElement('canvas'),ctx=canvas.getContext('2d'),container=document.getElementById('canvas-app')||document.body;container.appendChild(canvas);canvas.width=320;canvas.height=240;ctx.translate(0.5,0.5);var state={ver:'0.0.0',lt:new Date(),game:gameMod.create({canvas:canvas,pps:1024,distance:0,targetTimeUnit:'years'})};var loop=function(){var now=new Date(),t=now-state.lt,secs=t/1000;requestAnimationFrame(loop);gameMod.update(state.game,secs);draw.back(ctx,state.game,canvas);draw.playerShip(ctx,state.game);draw.textDistance(ctx,state.game,10,10);draw.textETA(ctx,state.game,10,20);draw.ver(ctx,state,2,canvas.height-12);state.lt=now;};loop();</script>
</body></html>